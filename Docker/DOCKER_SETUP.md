# üê≥ Docker —É—Å—Ç–∞–Ω–æ–≤–∫–∞ Job Parser System

–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤–∞–∫–∞–Ω—Å–∏–π –≤ Docker.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

### 1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞**

```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <your-repository-url>
cd job-parser-system

# –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.docker .env

# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)
nano .env
```

### 2. **–ó–∞–ø—É—Å–∫ –ø—Ä–æ—Å—Ç–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**

```bash
# –°–æ–±–∏—Ä–∞–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º —Ç–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
docker-compose up -d jobparser

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
docker-compose ps

# –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏
docker-compose logs -f jobparser
```

### 3. **–î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é**

–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: **http://localhost:5000**

**–¢–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã:**
- `admin` / `admin123` (–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä)
- `user1` / `pass123` (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å) 
- `guest` / `guest789` (–≥–æ—Å—Ç—å)

## üèóÔ∏è –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)

### 1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env`:

```bash
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–º–µ–Ω–∏—Ç–µ!
SECRET_KEY=your-unique-secret-key-here
POSTGRES_PASSWORD=secure_database_password
GRAFANA_PASSWORD=secure_grafana_password

# API –∫–ª—é—á SuperJob (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
SUPERJOB_SECRET=your-superjob-api-key

# –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
FLASK_ENV=production
DEBUG=false
```

### 2. **–ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤**

```bash
# –ó–∞–ø—É—Å–∫–∞–µ–º –ø–æ–ª–Ω—ã–π —Å—Ç–µ–∫
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose ps
```

### 3. **–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã**

| –°–µ—Ä–≤–∏—Å | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|-----|-----------|
| **Job Parser** | http://localhost:5000 | –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ |
| **PostgreSQL** | localhost:5432 | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö |
| **Redis** | localhost:6379 | –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ |
| **Nginx** | http://localhost:80 | –í–µ–±-—Å–µ—Ä–≤–µ—Ä |
| **Prometheus** | http://localhost:9090 | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ |
| **Grafana** | http://localhost:3000 | –î–∞—à–±–æ—Ä–¥—ã |

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

### **–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:**

```bash
# –õ–æ–≥–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
docker-compose logs -f jobparser

# –õ–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose logs -f

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose logs -f postgres
```

### **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤:**

```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker stats

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–º–æ–≤
docker system df

# –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose ps
```

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π

### **–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**

```bash
# –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
docker-compose up -d

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã
docker-compose down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
docker-compose restart jobparser

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤
docker-compose pull
docker-compose up -d --force-recreate

# –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤)
docker-compose up -d --scale jobparser=3
```

### **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏:**

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ –ë–î
docker-compose exec postgres pg_dump -U jobparser jobparser > backup.sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î
docker-compose exec -T postgres psql -U jobparser jobparser < backup.sql

# –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤
docker-compose exec jobparser truncate -s 0 /app/logs/*.log
```

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

### **Nginx (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)**

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `nginx/nginx.conf`:

```nginx
events {
    worker_connections 1024;
}

http {
    upstream jobparser {
        server jobparser:5000;
    }

    server {
        listen 80;
        server_name your-domain.com;

        location / {
            proxy_pass http://jobparser;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

        # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
        location /static/ {
            alias /app/static/;
            expires 1y;
        }
    }
}
```

### **Prometheus –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `monitoring/prometheus.yml`:

```yaml
global:
  scrape_interval: 15s

scrape_configs:
  - job_name: 'jobparser'
    static_configs:
      - targets: ['jobparser:5000']
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**

1. **–°–º–µ–Ω–∏—Ç–µ –≤—Å–µ –ø–∞—Ä–æ–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã**
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª**
4. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –ø–æ—Ä—Ç–∞–º –ë–î**

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
mkdir -p nginx/ssl
openssl req -x509 -nodes -days 365 -newkey rsa:2048 \
  -keyout nginx/ssl/jobparser.key \
  -out nginx/ssl/jobparser.crt
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Docker

### **–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:**

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker-compose exec jobparser python run_explained_tests.py

# –ò–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
docker build -t jobparser-test .
docker run --rm jobparser-test python run_explained_tests.py
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### **–ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**

1. **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:**
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏
docker-compose logs jobparser

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
docker-compose config
```

2. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º PostgreSQL
docker-compose exec postgres psql -U jobparser -d jobparser -c "\l"

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ–º —Ç–æ–º –ë–î
docker-compose down -v
docker-compose up -d
```

3. **–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ API:**
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º health check
curl http://localhost:5000/api/health

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ—Ç—å
docker network ls
docker network inspect jobparser-network
```

4. **–ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞:**
```bash
# –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–µ—Å—É—Ä—Å—ã –≤ docker-compose.yml
deploy:
  resources:
    limits:
      memory: 1G
      cpus: '1.0'
```

### **–û—á–∏—Å—Ç–∫–∞ —Å–∏—Å—Ç–µ–º—ã:**

```bash
# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (–í–ù–ò–ú–ê–ù–ò–ï: —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ!)
docker-compose down -v --rmi all --remove-orphans

# –û—á–∏—Å—Ç–∫–∞ —Ç–æ–ª—å–∫–æ –æ–±—Ä–∞–∑–æ–≤
docker-compose down --rmi all

# –û—á–∏—Å—Ç–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
docker system prune -a
```

## üìã Checklist –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

- [ ] –ò–∑–º–µ–Ω–µ–Ω—ã –≤—Å–µ –ø–∞—Ä–æ–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω HTTPS
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω —Ñ–∞–π—Ä–≤–æ–ª
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- [ ] –ü—Ä–æ–≤–µ–¥–µ–Ω–æ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ª–æ–≥–∏ –∏ –∞–ª–µ—Ä—Ç—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

## üéØ –ì–æ—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:**
```bash
docker-compose up -d jobparser redis
```

### **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```bash
docker-compose up -d jobparser postgres
```

### **–ü—Ä–æ–¥–∞–∫—à–µ–Ω:**
```bash
docker-compose up -d
```

---

**üê≥ Job Parser System –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ –≤ Docker!**

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–º–æ—â–∏ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É README.md –∏–ª–∏ –∏–∑—É—á–∞–π—Ç–µ –ª–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã.

üì¶ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
1. Dockerfile

–ú–Ω–æ–≥–æ—Å—Ç—É–ø–µ–Ω—á–∞—Ç—ã–π –æ–±—Ä–∞–∑ —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π
–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
Health check –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
–í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

2. docker-compose.yml

üöÄ –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (jobparser)
üóÑÔ∏è PostgreSQL –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
üîÑ Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
üåê Nginx –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è
üìä Prometheus + Grafana –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
üîí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —Ä–µ—Å—É—Ä—Å–æ–≤

3. .env.docker

–®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

4. DOCKER_SETUP.md

üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
üèóÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

5. .dockerignore

–ò—Å–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ–Ω—É–∂–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏–∑ –æ–±—Ä–∞–∑–∞
–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–±—Ä–∞–∑–∞
–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–∏—Å–∫–ª—é—á–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤)

üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫:
bash# 1. –ö–æ–ø–∏—Ä—É–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.docker .env

# 2. –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
nano .env

# 3. –ó–∞–ø—É—Å–∫–∞–µ–º —Å–∏—Å—Ç–µ–º—É
docker-compose up -d

# 4. –ü—Ä–æ–≤–µ—Ä—è–µ–º
curl http://localhost:5000/api/health
üéØ –í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:
–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
bashdocker-compose up -d jobparser
–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
bashdocker-compose up -d jobparser postgres
–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
bashdocker-compose up -d



